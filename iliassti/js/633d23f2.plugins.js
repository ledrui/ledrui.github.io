!function(a,b,c){"use strict";function d(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null}function e(){var a=d();return a?document[a]:!1}function f(a){return 0===Object.keys(a).length}var g,h,i=a.event;g=i.special.debouncedresize={setup:function(){a(this).on("resize",g.handler)},teardown:function(){a(this).off("resize",g.handler)},handler:function(a,b){var c=this,d=arguments,e=function(){a.type="debouncedresize",i.dispatch.apply(c,d)};h&&clearTimeout(h),b?e():h=setTimeout(e,g.threshold)},threshold:100},Array.prototype.shuffle=function(){for(var a,b,c=this.length;c--;)a=Math.floor(Math.random()*c),b=this[c],this[c]=this[a],this[a]=b;return this};var j=a(b),k=b.Modernizr;a.GridRotator=function(b,c){if(this.jQueryel=a(c),k.backgroundsize){this.jQueryel.addClass("ri-grid-loading"),this._init(b)}},a.GridRotator.defaults={rows:2,columns:4,w1024:{rows:3,columns:8},w768:{rows:3,columns:7},w480:{rows:3,columns:5},w320:{rows:2,columns:4},w240:{rows:2,columns:3},step:"random",maxStep:3,preventClick:!0,animType:"random",animSpeed:800,animEasingOut:"linear",animEasingIn:"linear",interval:3e3,slideshow:!0,onhover:!1,nochange:[]},a.GridRotator.prototype={_init:function(b){this.options=a.extend(!0,{},a.GridRotator.defaults,b),this._config()},_config:function(){var b=this,c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.supportTransitions=k.csstransitions,this.supportTransforms3D=k.csstransforms3d,this.transEndEventName=c[k.prefixed("transition")]+".gridrotator",this.animTypes=this.supportTransforms3D?["fadeInOut","slideLeft","slideRight","slideTop","slideBottom","rotateLeft","rotateRight","rotateTop","rotateBottom","scale","rotate3d","rotateLeftScale","rotateRightScale","rotateTopScale","rotateBottomScale"]:["fadeInOut","slideLeft","slideRight","slideTop","slideBottom"],this.animType=this.options.animType,"random"===this.animType||this.supportTransforms3D||-1!==a.inArray(this.animType,this.animTypes)||"showHide"===this.animType||(this.animType="fadeInOut"),this.animTypesTotal=this.animTypes.length,this.jQuerylist=this.jQueryel.children("ul");var d=0,e=this.jQuerylist.find("img"),f=e.length;e.each(function(){var c=a(this),g=c.attr("src");a("<img/>").load(function(){++d,c.parent().css("background-image","url("+g+")"),d===f&&(e.remove(),b.jQueryel.removeClass("ri-grid-loading"),b.jQueryitems=b.jQuerylist.children("li"),b.jQueryitemsCache=b.jQueryitems.clone(),b.itemsTotal=b.jQueryitems.length,b.outItems=[],b._layout(function(){b._initEvents()}),b._start())}).attr("src",g)})},_layout:function(b){var c=this;this._setGridDim(),this.jQuerylist.empty(),this.jQueryitems=this.jQueryitemsCache.clone().appendTo(this.jQuerylist);var d=this.jQueryitems.filter(":gt("+(this.showTotal-1)+")"),e=d.children("a");this.outItems.length=0,e.each(function(){c.outItems.push(a(this))}),d.remove();for(var f=document.defaultView?parseInt(document.defaultView.getComputedStyle(this.jQueryel.get(0),null).width):this.jQueryel.width(),g=Math.floor(f/this.columns),h=f-this.columns*Math.floor(g),i=0;i<this.rows;++i)for(var j=0;j<this.columns;++j){var k=this.columns*i+j,l=this.jQueryitems.eq(k);l.css({width:j<Math.floor(h)?g+1:g,height:g}),-1!==a.inArray(k,this.options.nochange)&&l.addClass("ri-nochange").data("nochange",!0)}this.options.preventClick&&this.jQueryitems.children().css("cursor","default").on("click.gridrotator",!1),b&&b.call()},_setGridDim:function(){var a=this.jQueryel.width();switch(!0){case 240>a:this.rows=this.options.w240.rows,this.columns=this.options.w240.columns;break;case 320>a:this.rows=this.options.w320.rows,this.columns=this.options.w320.columns;break;case 480>a:this.rows=this.options.w480.rows,this.columns=this.options.w480.columns;break;case 768>a:this.rows=this.options.w768.rows,this.columns=this.options.w768.columns;break;case 1024>a:this.rows=this.options.w1024.rows,this.columns=this.options.w1024.columns;break;default:this.rows=this.options.rows,this.columns=this.options.columns}this.showTotal=this.rows*this.columns},_initEvents:function(){var b=this;j.on("debouncedresize.gridrotator",function(){b._layout()});var c=d();if(c){var e=c.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(e,function(){b._visChange()})}!k.touch&&this.options.onhover&&b.jQueryitems.on("mouseenter.gridrotator",function(){var c=a(this);c.data("active")||c.data("hovered")||c.data("nochange")||(c.data("hovered",!0),b._replace(c))}).on("mouseleave.gridrotator",function(){a(this).data("hovered",!1)})},_visChange:function(){e()?clearTimeout(this.playtimeout):this._start()},_start:function(){this.showTotal<this.itemsTotal&&this.options.slideshow&&this._showNext()},_getAnimType:function(){return"random"===this.animType?this.animTypes[Math.floor(Math.random()*this.animTypesTotal)]:this.animType},_getAnimProperties:function(a){var b,d={},e={},f={},g={},h=this._getAnimType(),i=0;switch(h){case"showHide":b=0,g.opacity=0;break;case"fadeInOut":g.opacity=0;break;case"slideLeft":d.left=a.width(),f.left=0,g.left=-a.width();break;case"slideRight":d.left=-a.width(),f.left=0,g.left=a.width();break;case"slideTop":d.top=a.height(),f.top=0,g.top=-a.height();break;case"slideBottom":d.top=-a.height(),f.top=0,g.top=a.height();break;case"rotateLeft":b=this.options.animSpeed/2,d.transform="rotateY(90deg)",f.transform="rotateY(0deg)",i=b,g.transform="rotateY(-90deg)";break;case"rotateRight":b=this.options.animSpeed/2,d.transform="rotateY(-90deg)",f.transform="rotateY(0deg)",i=b,g.transform="rotateY(90deg)";break;case"rotateTop":b=this.options.animSpeed/2,d.transform="rotateX(90deg)",f.transform="rotateX(0deg)",i=b,g.transform="rotateX(-90deg)";break;case"rotateBottom":b=this.options.animSpeed/2,d.transform="rotateX(-90deg)",f.transform="rotateX(0deg)",i=b,g.transform="rotateX(90deg)";break;case"scale":b=this.options.animSpeed/2,d.transform="scale(0)",e.transform="scale(1)",f.transform="scale(1)",i=b,g.transform="scale(0)";break;case"rotateLeftScale":e.transform="scale(1)",b=this.options.animSpeed/2,d.transform="scale(0.3) rotateY(90deg)",f.transform="scale(1) rotateY(0deg)",i=b,g.transform="scale(0.3) rotateY(-90deg)";break;case"rotateRightScale":e.transform="scale(1)",b=this.options.animSpeed/2,d.transform="scale(0.3) rotateY(-90deg)",f.transform="scale(1) rotateY(0deg)",i=b,g.transform="scale(0.3) rotateY(90deg)";break;case"rotateTopScale":e.transform="scale(1)",b=this.options.animSpeed/2,d.transform="scale(0.3) rotateX(90deg)",f.transform="scale(1) rotateX(0deg)",i=b,g.transform="scale(0.3) rotateX(-90deg)";break;case"rotateBottomScale":e.transform="scale(1)",b=this.options.animSpeed/2,d.transform="scale(0.3) rotateX(-90deg)",f.transform="scale(1) rotateX(0deg)",i=b,g.transform="scale(0.3) rotateX(90deg)";break;case"rotate3d":b=this.options.animSpeed/2,d.transform="rotate3d( 1, 1, 0, 90deg )",f.transform="rotate3d( 1, 1, 0, 0deg )",i=b,g.transform="rotate3d( 1, 1, 0, -90deg )"}return{startInProp:d,startOutProp:e,endInProp:f,endOutProp:g,delay:i,animSpeed:b!=c?b:this.options.animSpeed}},_showNext:function(a){var b=this;clearTimeout(this.playtimeout),this.playtimeout=setTimeout(function(){var a=b.options.step,c=b.options.maxStep,d=1;c>b.showTotal&&(c=b.showTotal);for(var e="random"===a?Math.floor(Math.random()*c+d):Math.min(Math.abs(a),c),f=b._getRandom(e,b.showTotal),g=0;e>g;++g){var h=b.jQueryitems.eq(f[g]);if(h.data("active")||h.data("nochange"))return b._showNext(1),!1;b._replace(h)}b._showNext()},a||Math.max(Math.abs(this.options.interval),300))},_replace:function(b){b.data("active",!0);var c=this,d=b.children("a:last"),e={width:d.width(),height:d.height()};b.data("active",!0);var g=this.outItems.shift();this.outItems.push(d.clone().css("transition","none")),g.css(e).prependTo(b);var h=this._getAnimProperties(d);g.css(h.startInProp),d.css(h.startOutProp),this._setTransition(g,"all",h.animSpeed,h.delay,this.options.animEasingIn),this._setTransition(d,"all",h.animSpeed,0,this.options.animEasingOut),this._applyTransition(g,h.endInProp,h.animSpeed,function(){var b=a(this),d=h.animSpeed===c.options.animSpeed&&f(h.endInProp)?h.animSpeed:0;setTimeout(function(){c.supportTransitions&&b.off(c.transEndEventName),b.next().remove(),b.parent().data("active",!1)},d)},0===h.animSpeed||f(h.endInProp)),this._applyTransition(d,h.endOutProp,h.animSpeed)},_getRandom:function(a,b){for(var c=[],d=0;b>d;++d)c.push(d);return c.shuffle().slice(0,a)},_setTransition:function(a,b,c,d,e){setTimeout(function(){a.css("transition",b+" "+c+"ms "+d+"ms "+e)},25)},_applyTransition:function(b,c,d,e,f){var g=this;setTimeout(function(){a.fn.applyStyle=g.supportTransitions?a.fn.css:a.fn.animate,e&&g.supportTransitions&&(b.on(g.transEndEventName,e),f&&e.call(b)),e=e||function(){return!1},b.stop().applyStyle(c,a.extend(!0,[],{duration:d+"ms",complete:e}))},25)}};var l=function(a){b.console&&b.console.error(a)};a.fn.gridrotator=function(b){var c=a.data(this,"gridrotator");if("string"==typeof b){var d=Array.prototype.slice.call(arguments,1);this.each(function(){return c?a.isFunction(c[b])&&"_"!==b.charAt(0)?void c[b].apply(c,d):void l("no such method '"+b+"' for gridrotator instance"):void l("cannot call methods on gridrotator prior to initialization; attempted to call method '"+b+"'")})}else this.each(function(){c?c._init():c=a.data(this,"gridrotator",new a.GridRotator(b,this))});return c}}(jQuery,window),function(a){function b(a){var b=a.attr("placeholder");c(a,b),a.focus(function(){a.data("changed")!==!0&&a.val()===b&&a.val("")}).blur(function(){""===a.val()&&a.val(b)}).change(function(){a.data("changed",""!==a.val())})}function c(a,b){""===a.val()?a.val(b):a.data("changed",!0)}function d(b){var c=e(b);b.after(c),""===b.val()?b.hide():c.hide(),a(b).blur(function(){""===b.val()&&(b.hide(),c.show())}),a(c).focus(function(){b.show().focus(),c.hide()})}function e(b){return a("<input>").attr({placeholder:b.attr("placeholder"),value:b.attr("placeholder"),id:b.attr("id"),readonly:!0}).addClass(b.attr("class"))}function f(b){b.find(":input[placeholder]").each(function(){a(this).data("changed")!==!0&&a(this).val()===a(this).attr("placeholder")&&a(this).val("")})}"placeholder"in document.createElement("input")||a(document).ready(function(){a(":input[placeholder]").not(":password").each(function(){b(a(this))}),a(":password[placeholder]").each(function(){d(a(this))}),a("form").submit(function(){f(a(this))})})}(jQuery),$(document).ready(function(){var a=[],b=[],c=0,d="",e="",f="",g=null,h=0,i=0,j=0,k=0;$(window).scroll(function(){var a=$(this).scrollTop();d=a>c?"down":"up",c=a}),$.fn.stickUp=function(a){$(this).addClass("stuckMenu");var c=0;if(null!=a){for(var d in a.parts)a.parts.hasOwnProperty(d)&&(b[c]=a.parts[c],c++);0==c&&console.log("error:needs arguments"),e=a.itemClass,f=a.itemHover,null!=a.topMargin?"auto"==a.topMargin?k=parseInt($(".stuckMenu").css("margin-top")):isNaN(a.topMargin)&&a.topMargin.search("px")>0?k=parseInt(a.topMargin.replace("px","")):isNaN(parseInt(a.topMargin))?(console.log("incorrect argument, ignored."),k=0):k=parseInt(a.topMargin):k=0,g=$("."+e).size()}h=parseInt($(this).height()),i=parseInt($(this).css("margin-bottom")),j=parseInt($(this).next().closest("div").css("margin-top")),vartop=parseInt($(this).offset().top)},$(document).on("scroll",function(){function c(c){contentView=.4*$("#"+b[c]).height(),testView=a[c]-contentView,varscroll>testView?($("."+e).removeClass(f),$("."+e+":eq("+c+")").addClass(f)):50>varscroll&&($("."+e).removeClass(f),$("."+e+":eq(0)").addClass(f))}if(varscroll=parseInt($(document).scrollTop()),null!=g)for(var l=0;g>l;l++)a[l]=$("#"+b[l]).offset().top,"down"==d&&varscroll>a[l]-50&&varscroll<a[l]+50&&($("."+e).removeClass(f),$("."+e+":eq("+l+")").addClass(f)),"up"==d&&c(l);varscroll+k>vartop&&($(".stuckMenu").addClass("isStuck"),$(".stuckMenu").next().closest("div").css({"margin-top":h+i+j+"px"},10),$(".stuckMenu").css("position","fixed"),$(".isStuck").css({top:"0px"},10,function(){})),vartop>varscroll+k&&($(".stuckMenu").removeClass("isStuck"),$(".stuckMenu").next().closest("div").css({"margin-top":j+"px"},10),$(".stuckMenu").css("position","relative"))})}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin(2*(b*e-f)*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=.3*e*1.5),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),function(a,b){"object"==typeof exports?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define("EasyPieChart",["jquery"],b):b(a.jQuery)}(this,function(a){var b=function(a,b){var c,d=document.createElement("canvas");"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(d);var e=d.getContext("2d");d.width=d.height=b.size,a.appendChild(d);var f=1;window.devicePixelRatio>1&&(f=window.devicePixelRatio,d.style.width=d.style.height=[b.size,"px"].join(""),d.width=d.height=b.size*f,e.scale(f,f)),e.translate(b.size/2,b.size/2),e.rotate((-0.5+b.rotate/180)*Math.PI);var g=(b.size-b.lineWidth)/2;b.scaleColor&&b.scaleLength&&(g-=b.scaleLength+2),Date.now=Date.now||function(){return+new Date};var h=function(a,b,c){c=Math.min(Math.max(0,c||1),1),e.beginPath(),e.arc(0,0,g,0,2*Math.PI*c,!1),e.strokeStyle=a,e.lineWidth=b,e.stroke()},i=function(){var a,c,d=24;e.lineWidth=1,e.fillStyle=b.scaleColor,e.save();for(var d=24;d>0;--d)d%6===0?(c=b.scaleLength,a=0):(c=.6*b.scaleLength,a=b.scaleLength-c),e.fillRect(-b.size/2+a,0,c,1),e.rotate(Math.PI/12);e.restore()},j=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),k=function(){b.scaleColor&&i(),b.trackColor&&h(b.trackColor,b.lineWidth)};this.clear=function(){e.clearRect(b.size/-2,b.size/-2,b.size,b.size)},this.draw=function(a){b.scaleColor||b.trackColor?e.getImageData&&e.putImageData?c?e.putImageData(c,0,0):(k(),c=e.getImageData(0,0,b.size*f,b.size*f)):(this.clear(),k()):this.clear(),e.lineCap=b.lineCap;var d;d="function"==typeof b.barColor?b.barColor(a):b.barColor,a>0&&h(d,b.lineWidth,a/100)}.bind(this),this.animate=function(a,c){var d=Date.now();b.onStart(a,c);var e=function(){var f=Math.min(Date.now()-d,b.animate),g=b.easing(this,f,a,c-a,b.animate);this.draw(g),b.onStep(a,c,g),f>=b.animate?b.onStop(a,c):j(e)}.bind(this);j(e)}.bind(this)},c=function(a,c){var d={barColor:"#ff675f",trackColor:"#e1e1e3",scaleColor:"#e1e1e3",scaleLength:0,lineCap:"round",lineWidth:15,size:152,rotate:0,animate:1e3,easing:function(a,b,c,d,e){return b/=e/2,1>b?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},onStart:function(){},onStep:function(){},onStop:function(){}};if("undefined"!=typeof b)d.renderer=b;else{if("undefined"==typeof SVGRenderer)throw new Error("Please load either the SVG- or the CanvasRenderer");d.renderer=SVGRenderer}var e={},f=0,g=function(){this.el=a,this.options=e;for(var b in d)d.hasOwnProperty(b)&&(e[b]=c&&"undefined"!=typeof c[b]?c[b]:d[b],"function"==typeof e[b]&&(e[b]=e[b].bind(this)));e.easing="string"==typeof e.easing&&"undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.easing[e.easing])?jQuery.easing[e.easing]:d.easing,this.renderer=new e.renderer(a,e),this.renderer.draw(f),a.dataset&&a.dataset.percent?this.update(parseFloat(a.dataset.percent)):a.getAttribute&&a.getAttribute("data-percent")&&this.update(parseFloat(a.getAttribute("data-percent")))}.bind(this);this.update=function(a){return a=parseFloat(a),e.animate?this.renderer.animate(f,a):this.renderer.draw(a),f=a,this}.bind(this),g()};a.fn.easyPieChart=function(b){return this.each(function(){a.data(this,"easyPieChart")||a.data(this,"easyPieChart",new c(this,b))})}}),function(a,b){"use strict";var c,d=a.document,e=a.Modernizr,f=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},g="Moz Webkit O Ms".split(" "),h=function(a){var b,c=d.documentElement.style;if("string"==typeof c[a])return a;a=f(a);for(var e=0,h=g.length;h>e;e++)if(b=g[e]+a,"string"==typeof c[b])return b},i=h("transform"),j=h("transitionProperty"),k={csstransforms:function(){return!!i},csstransforms3d:function(){var a=!!h("perspective");if(a){var c=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),d="@media ("+c.join("transform-3d),(")+"modernizr)",e=b("<style>"+d+"{#modernizr{height:3px}}</style>").appendTo("head"),f=b('<div id="modernizr" />').appendTo("html");a=6===f.height(),f.remove(),e.remove()}return a},csstransitions:function(){return!!j}};if(e)for(c in k)e.hasOwnProperty(c)||e.addTest(c,k[c]);else{e=a.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var l,m=" ";for(c in k)l=k[c](),e[c]=l,m+=" "+(l?"":"no-")+c;b("html").addClass(m)}if(e.csstransforms){var n=e.csstransforms3d?{translate:function(a){return"translate3d("+a[0]+"px, "+a[1]+"px, 0) "},scale:function(a){return"scale3d("+a+", "+a+", 1) "}}:{translate:function(a){return"translate("+a[0]+"px, "+a[1]+"px) "},scale:function(a){return"scale("+a+") "}},o=function(a,c,d){var e,f,g=b.data(a,"isoTransform")||{},h={},j={};h[c]=d,b.extend(g,h);for(e in g)f=g[e],j[e]=n[e](f);var k=j.translate||"",l=j.scale||"",m=k+l;b.data(a,"isoTransform",g),a.style[i]=m};b.cssNumber.scale=!0,b.cssHooks.scale={set:function(a,b){o(a,"scale",b)},get:function(a){var c=b.data(a,"isoTransform");return c&&c.scale?c.scale:1}},b.fx.step.scale=function(a){b.cssHooks.scale.set(a.elem,a.now+a.unit)},b.cssNumber.translate=!0,b.cssHooks.translate={set:function(a,b){o(a,"translate",b)},get:function(a){var c=b.data(a,"isoTransform");return c&&c.translate?c.translate:[0,0]}}}var p,q;e.csstransitions&&(p={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[j],q=h("transitionDuration"));var r,s=b.event,t=b.event.handle?"handle":"dispatch";s.special.smartresize={setup:function(){b(this).bind("resize",s.special.smartresize.handler)},teardown:function(){b(this).unbind("resize",s.special.smartresize.handler)},handler:function(a,b){var c=this,d=arguments;a.type="smartresize",r&&clearTimeout(r),r=setTimeout(function(){s[t].apply(c,d)},"execAsap"===b?0:100)}},b.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])},b.Isotope=function(a,c,d){this.element=b(c),this._create(a),this._init(d)};var u=["width","height"],v=b(a);b.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},b.Isotope.prototype={_create:function(a){this.options=b.extend({},b.Isotope.settings,a),this.styleQueue=[],this.elemCount=0;var c=this.element[0].style;this.originalStyle={};var d=u.slice(0);for(var e in this.options.containerStyle)d.push(e);for(var f=0,g=d.length;g>f;f++)e=d[f],this.originalStyle[e]=c[e]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var h={"original-order":function(a,b){return b.elemCount++,b.elemCount},random:function(){return Math.random()}};this.options.getSortData=b.extend(this.options.getSortData,h),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var i=this;setTimeout(function(){i.element.addClass(i.options.containerClass)},0),this.options.resizable&&v.bind("smartresize.isotope",function(){i.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(a){var b=this.options.itemSelector,c=b?a.filter(b).add(a.find(b)):a,d={position:"absolute"};return c=c.filter(function(a,b){return 1===b.nodeType}),this.usingTransforms&&(d.left=0,d.top=0),c.css(d).addClass(this.options.itemClass),this.updateSortData(c,!0),c},_init:function(a){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(a)},option:function(a){if(b.isPlainObject(a)){this.options=b.extend(!0,this.options,a);var c;for(var d in a)c="_update"+f(d),this[c]&&this[c]()}},_updateAnimationEngine:function(){var a,b=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");switch(b){case"css":case"none":a=!1;break;case"jquery":a=!0;break;default:a=!e.csstransitions}this.isUsingJQueryAnimation=a,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var a=this.usingTransforms=this.options.transformsEnabled&&e.csstransforms&&e.csstransitions&&!this.isUsingJQueryAnimation;a||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=a?this._translate:this._positionAbs},_filter:function(a){var b=""===this.options.filter?"*":this.options.filter;if(!b)return a;var c=this.options.hiddenClass,d="."+c,e=a.filter(d),f=e;if("*"!==b){f=e.filter(b);var g=a.not(d).not(b).addClass(c);this.styleQueue.push({$el:g,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:f,style:this.options.visibleStyle}),f.removeClass(c),a.filter(b)},updateSortData:function(a,c){var d,e,f=this,g=this.options.getSortData;a.each(function(){d=b(this),e={};for(var a in g)e[a]=c||"original-order"!==a?g[a](d,f):b.data(this,"isotope-sort-data")[a];b.data(this,"isotope-sort-data",e)})},_sort:function(){var a=this.options.sortBy,b=this._getSorter,c=this.options.sortAscending?1:-1,d=function(d,e){var f=b(d,a),g=b(e,a);return f===g&&"original-order"!==a&&(f=b(d,"original-order"),g=b(e,"original-order")),(f>g?1:g>f?-1:0)*c};this.$filteredAtoms.sort(d)},_getSorter:function(a,c){return b.data(a,"isotope-sort-data")[c]},_translate:function(a,b){return{translate:[a,b]}},_positionAbs:function(a,b){return{left:a,top:b}},_pushPosition:function(a,b,c){b=Math.round(b+this.offset.left),c=Math.round(c+this.offset.top);var d=this.getPositionStyles(b,c);this.styleQueue.push({$el:a,style:d}),this.options.itemPositionDataEnabled&&a.data("isotope-item-position",{x:b,y:c})},layout:function(a,b){var c=this.options.layoutMode;if(this["_"+c+"Layout"](a),this.options.resizesContainer){var d=this["_"+c+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:d})}this._processStyleQueue(a,b),this.isLaidOut=!0},_processStyleQueue:function(a,c){var d,f,g,h,i=this.isLaidOut&&this.isUsingJQueryAnimation?"animate":"css",j=this.options.animationOptions,k=this.options.onLayout;if(f=function(a,b){b.$el[i](b.style,j)},this._isInserting&&this.isUsingJQueryAnimation)f=function(a,b){d=b.$el.hasClass("no-transition")?"css":i,b.$el[d](b.style,j)};else if(c||k||j.complete){var l=!1,m=[c,k,j.complete],n=this;if(g=!0,h=function(){if(!l){for(var b,c=0,d=m.length;d>c;c++)b=m[c],"function"==typeof b&&b.call(n.element,a,n);l=!0}},this.isUsingJQueryAnimation&&"animate"===i)j.complete=h,g=!1;else if(e.csstransitions){for(var o,r=0,s=this.styleQueue[0],t=s&&s.$el;!t||!t.length;){if(o=this.styleQueue[r++],!o)return;t=o.$el}var u=parseFloat(getComputedStyle(t[0])[q]);u>0&&(f=function(a,b){b.$el[i](b.style,j).one(p,h)},g=!1)}}b.each(this.styleQueue,f),g&&h(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(a){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,a)},addItems:function(a,b){var c=this._getAtoms(a);this.$allAtoms=this.$allAtoms.add(c),b&&b(c)},insert:function(a,b){this.element.append(a);var c=this;this.addItems(a,function(a){var d=c._filter(a);c._addHideAppended(d),c._sort(),c.reLayout(),c._revealAppended(d,b)})},appended:function(a,b){var c=this;this.addItems(a,function(a){c._addHideAppended(a),c.layout(a),c._revealAppended(a,b)})},_addHideAppended:function(a){this.$filteredAtoms=this.$filteredAtoms.add(a),a.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:a,style:this.options.hiddenStyle})},_revealAppended:function(a,b){var c=this;setTimeout(function(){a.removeClass("no-transition"),c.styleQueue.push({$el:a,style:c.options.visibleStyle}),c._isInserting=!1,c._processStyleQueue(a,b)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(a,b){this.$allAtoms=this.$allAtoms.not(a),this.$filteredAtoms=this.$filteredAtoms.not(a);var c=this,d=function(){a.remove(),b&&b.call(c.element)};a.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:a,style:this.options.hiddenStyle}),this._sort(),this.reLayout(d)):d()},shuffle:function(a){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(a)},destroy:function(){var a=this.usingTransforms,b=this.options;this.$allAtoms.removeClass(b.hiddenClass+" "+b.itemClass).each(function(){var b=this.style;b.position="",b.top="",b.left="",b.opacity="",a&&(b[i]="")});var c=this.element[0].style;for(var d in this.originalStyle)c[d]=this.originalStyle[d];this.element.unbind(".isotope").undelegate("."+b.hiddenClass,"click").removeClass(b.containerClass).removeData("isotope"),v.unbind(".isotope")},_getSegments:function(a){var b,c=this.options.layoutMode,d=a?"rowHeight":"columnWidth",e=a?"height":"width",g=a?"rows":"cols",h=this.element[e](),i=this.options[c]&&this.options[c][d]||this.$filteredAtoms["outer"+f(e)](!0)||h;b=Math.floor(h/i),b=Math.max(b,1),this[c][g]=b,this[c][d]=i},_checkIfSegmentsChanged:function(a){var b=this.options.layoutMode,c=a?"rows":"cols",d=this[b][c];return this._getSegments(a),this[b][c]!==d},_masonryReset:function(){this.masonry={},this._getSegments();var a=this.masonry.cols;for(this.masonry.colYs=[];a--;)this.masonry.colYs.push(0)},_masonryLayout:function(a){var c=this,d=c.masonry;a.each(function(){var a=b(this),e=Math.ceil(a.outerWidth(!0)/d.columnWidth);if(e=Math.min(e,d.cols),1===e)c._masonryPlaceBrick(a,d.colYs);else{var f,g,h=d.cols+1-e,i=[];for(g=0;h>g;g++)f=d.colYs.slice(g,g+e),i[g]=Math.max.apply(Math,f);c._masonryPlaceBrick(a,i)}})},_masonryPlaceBrick:function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,f=b.length;f>e;e++)if(b[e]===c){d=e;break}var g=this.masonry.columnWidth*d,h=c;this._pushPosition(a,g,h);var i=c+a.outerHeight(!0),j=this.masonry.cols+1-f;for(e=0;j>e;e++)this.masonry.colYs[d+e]=i},_masonryGetContainerSize:function(){var a=Math.max.apply(Math,this.masonry.colYs);return{height:a}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(a){var c=this,d=this.element.width(),e=this.fitRows;a.each(function(){var a=b(this),f=a.outerWidth(!0),g=a.outerHeight(!0);0!==e.x&&f+e.x>d&&(e.x=0,e.y=e.height),c._pushPosition(a,e.x,e.y),e.height=Math.max(e.y+g,e.height),e.x+=f})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(a){var c=this,d=this.cellsByRow;a.each(function(){var a=b(this),e=d.index%d.cols,f=Math.floor(d.index/d.cols),g=(e+.5)*d.columnWidth-a.outerWidth(!0)/2,h=(f+.5)*d.rowHeight-a.outerHeight(!0)/2;c._pushPosition(a,g,h),d.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(a){var c=this;a.each(function(){var a=b(this);c._pushPosition(a,0,c.straightDown.y),c.straightDown.y+=a.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var a=this.masonryHorizontal.rows;for(this.masonryHorizontal.rowXs=[];a--;)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(a){var c=this,d=c.masonryHorizontal;a.each(function(){var a=b(this),e=Math.ceil(a.outerHeight(!0)/d.rowHeight);if(e=Math.min(e,d.rows),1===e)c._masonryHorizontalPlaceBrick(a,d.rowXs);else{var f,g,h=d.rows+1-e,i=[];for(g=0;h>g;g++)f=d.rowXs.slice(g,g+e),i[g]=Math.max.apply(Math,f);c._masonryHorizontalPlaceBrick(a,i)}})},_masonryHorizontalPlaceBrick:function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,f=b.length;f>e;e++)if(b[e]===c){d=e;break}var g=c,h=this.masonryHorizontal.rowHeight*d;this._pushPosition(a,g,h);var i=c+a.outerWidth(!0),j=this.masonryHorizontal.rows+1-f;for(e=0;j>e;e++)this.masonryHorizontal.rowXs[d+e]=i},_masonryHorizontalGetContainerSize:function(){var a=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:a}
},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(a){var c=this,d=this.element.height(),e=this.fitColumns;a.each(function(){var a=b(this),f=a.outerWidth(!0),g=a.outerHeight(!0);0!==e.y&&g+e.y>d&&(e.x=e.width,e.y=0),c._pushPosition(a,e.x,e.y),e.width=Math.max(e.x+f,e.width),e.y+=g})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(a){var c=this,d=this.cellsByColumn;a.each(function(){var a=b(this),e=Math.floor(d.index/d.rows),f=d.index%d.rows,g=(e+.5)*d.columnWidth-a.outerWidth(!0)/2,h=(f+.5)*d.rowHeight-a.outerHeight(!0)/2;c._pushPosition(a,g,h),d.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(a){var c=this;a.each(function(){var a=b(this);c._pushPosition(a,c.straightAcross.x,0),c.straightAcross.x+=a.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},b.fn.imagesLoaded=function(a){function c(){a.call(e,f)}function d(a){var e=a.target;e.src!==h&&-1===b.inArray(e,i)&&(i.push(e),--g<=0&&(setTimeout(c),f.unbind(".imagesLoaded",d)))}var e=this,f=e.find("img").add(e.filter("img")),g=f.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i=[];return g||c(),f.bind("load.imagesLoaded error.imagesLoaded",d).each(function(){var a=this.src;this.src=h,this.src=a}),e};var w=function(b){a.console&&a.console.error(b)};b.fn.isotope=function(a,c){if("string"==typeof a){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var c=b.data(this,"isotope");return c?b.isFunction(c[a])&&"_"!==a.charAt(0)?void c[a].apply(c,d):void w("no such method '"+a+"' for isotope instance"):void w("cannot call methods on isotope prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var d=b.data(this,"isotope");d?(d.option(a),d._init(c)):b.data(this,"isotope",new b.Isotope(a,this,c))});return this}}(window,jQuery),function(a){"use strict";jQuery(document).ready(function(){a("#cform").submit(function(){var b=a(this).attr("action");return a("#message").slideUp(750,function(){a("#message").hide(),a("#submit").before('<img src="images/ajax-loader.gif" class="contact-loader" />').attr("disabled","disabled"),a.post(b,{name:a("#name").val(),email:a("#email").val(),comments:a("#comments").val()}).fail(function(){a("#message").slideDown("slow"),a("#cform img.contact-loader").fadeOut("slow",function(){a(this).remove()}),a("#submit").removeAttr("disabled"),a("#cform").slideUp("slow")})}),!1})})}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)},c=new c,c.options=a.extend(!0,{},c.options),a[f][b].prototype=a.extend(!0,c,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b];if(c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{},c.originalEvent){b=a.event.props.length;for(var f;b;)f=a.event.props[--b],c[f]=c.originalEvent[f]}return this.element.trigger(c,d),!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a,b){a.widget("ui.rlightbox",{options:{animationSpeed:"fast",setPrefix:"lb",showMap:!0,counterDelimiter:" / ",videoWidth:640,videoHeight:385,errorMessage:"Oh dear! Something went wrong! If the problem still appears let the pageâ€™s admin know. Would you like to try again or reject the content?",againButtonLabel:"Try again",rejectButtonLabel:"Reject this content",overwriteTitle:!1,keys:{next:[78,39],previous:[80,37],close:[67,27],panorama:[90,null]},loop:!1},_create:function(){var c,d=a.ui.rlightbox.global,e=this;d.getLightbox(),c=d.extractAnchor(this),c.type!==b&&(d.addToSet(c),this.element.click(function(a){d.open(e),a.preventDefault()}))},_setOption:function(){}}),a.extend(a.ui.rlightbox,{global:{addToSet:function(b){var c=this.getSetName(b.self),d=a.ui.rlightbox.global.sets,e=b.self.options,f=e.setPrefix,g="."+f+"_"+c,h=a(g).index(b.element);d[c]?d[c].splice(h,0,b):(d[c]=[],d[c].push(b))},checkButtonsState:function(){var a=this.data,b=this.$lightbox,c=a.currentSet,d=a.totalElementsNumber,e=a.currentElementNumber,f=a.currentSetElement.self.options.loop;"single"===c||1===d?this.setButtonState("disabled"):1===e&&f===!1?(this.setButtonState("disabled",b.prev),this.setButtonState("default",b.next)):e===d&&f===!1?(this.setButtonState("disabled",b.next),this.setButtonState("default",b.prev)):this.setButtonState("default")},checkMinimalSize:function(a,b){var c=this.data,d=c.minimalLightboxSize,e=d.width,f=d.height;return"width"===a?e>b?e:b:"height"===a?f>b?f:b:void 0},closeLightbox:function(){var b=this.data,c=this.$lightbox;b.ready&&(c.overlay.add(c.root).add(c.header).hide(),a("body").css("overflow","visible"),c.content.empty().width(20).height(20),this.hideArrow(),this.setButtonState("default"),this.panoramaHideIcon(),b.currentElementNumber=null,b.totalElementsNumber=null,c.title.empty(),this.panoramaHideMap(),b.ready=!1)},createStructure:function(){var b=this.data;a(b.htmlLightbox).appendTo("body").after(b.htmlMap).after(b.htmlOverlay)},destroy:function(){var a=this.data,b=a.currentSetElement.element;b.unbind(".rlightbox").unbind("click").removeData("rlightbox")},extractAnchor:function(c){var d={type:b},e=a(c.element),f=e.attr("href"),g={youtube:{urls:[/(http:\/\/www\.youtube\.com\/watch\?v=([\w-_]+))&?/],type:"youtube"},image:{urls:[/.jpg$|.png$|.gif$/],type:"image"},vimeo:{urls:[/(http:\/\/vimeo\.com\/groups\/\w+\/videos\/(\w+))&?/,/(http:\/\/vimeo\.com\/(\w+))&?/],type:"vimeo"},flash:{urls:[/.swf/],type:"flash"}};return a.each(g,function(b,g){var h=!1;return a.each(g.urls,function(a,b){var i=b.exec(f);return null!==i?(d={url:i[1],id:i[2],type:g.type,element:e,self:c},("image"===g.type||"flash"===g.type||c.options.overwriteTitle)&&(d.title=e.attr("title"),d.url=f),h=!0,!1):void 0}),h?!1:void 0}),d},getAvailableScreenSize:function(){var a=this.data,b=a.lightboxPadding;return{width:this.getWindowSize("width")-b,height:this.getWindowSize("height")-a.headerHeight-b}},getCurrentElementNumber:function(b){var c,d=this.data,e=this.sets,f=e[d.currentSet];return a.each(f,function(d,e){return a(b).get(0)===e.element.get(0)?(c=d+1,!1):void 0}),c},getImageStatus:function(a,b){var c,d,e=this.data,f=e.currentSetElement,g=this.getWindowSize("width"),h=this.getWindowSize("height"),i=e.minimalLightboxSize.width,j=e.minimalLightboxSize.height,k=(f.width,f.height,e.lightboxPadding),l=e.headerHeight;return c=i>=a?-1:a>i&&g>=a+k?1:2,d=j>=b?-1:b>j&&h>=b+k+l?1:2,{statusWidth:c,statusHeight:d}},getLightbox:function(){var b=this.data,c=this.$lightbox,d=this;c.root||(this.createStructure(),this.setReferences(),c.close.add(c.overlay).click(a.proxy(this.closeLightbox,this)),c.next.click(a.proxy(this.next,this)),c.prev.click(a.proxy(this.prev,this)),c.next.add(c.prev).add(c.next).add(c.close).hover(function(){a(this).is(":not(.ui-state-disabled)")&&d.setButtonState("highlight",a(this))},function(){a(this).is(":not(.ui-state-disabled)")&&d.setButtonState("default",a(this))}),c.contentContainer.mousemove(a.proxy(this.showArrow,this)).mousemove(a.proxy(this.checkSide,this)).mousemove(a.proxy(this.setCursor,this)).click(function(){"left"===b.side?d.prev.apply(d):"right"===b.side&&d.next.apply(d)}).mousedown(a.proxy(this.panoramaStart,this)).mouseup(a.proxy(this.panoramaStop,this)).mouseleave(function(){d.hideArrow.apply(d),b.side=""}),c.panoramaIcon.click(a.proxy(this.panoramaToggle,this)).hover(a.proxy(this.panoramaHighlight,this)),a(window).bind("resize.rlightbox",a.proxy(this.liveResize,this)),a(document).keyup(a.proxy(this.handleKeyboard,this)))},getOptimalSize:function(a,b){var c=this.data,d=c.minimalLightboxSize,e=d.width,f=d.height,g=this.getAvailableScreenSize(),h=g.width,i=g.height;return"width"===a?e>b?e:b>h?h:b:"height"===a?f>b?f:b>i?i:b:void 0},getParam:function(a,b){var c,d="[\\?&]"+a+"=(\\w+)",e=new RegExp(d);return c=e.exec(b),null!==c?c[1]:null},getSetName:function(b){var c=a(b.element).attr("class"),d=b.options.setPrefix+"_",e=new RegExp(d+"([\\w-_]+)"),f=e.exec(c);return f?f[1]:"single"},checkSide:function(a){{var b=this.data,c=this.$lightbox,d=c.contentContainer,e=a.pageX-d.offset().left,f=Math.round(d.width()/2);b.currentElementNumber,b.totalElementsNumber}f>=e?b.side="left":e>f&&(b.side="right"),a.preventDefault()},getSizes:function(){function a(k,m){b=l.getImageStatus(k,m),c=b.statusWidth,d=b.statusHeight,1!==c&&-1!==c||2===d||1!==d&&-1!==d||2===c?(2===c||2===d)&&(1===c||-1===c?(h=o-u-t,f=h,i=h/m,-1===c?(g=p,e=Math.ceil(k*i)):(g=Math.ceil(k*i)-t,e=g,p>=e&&a(e,f))):1===d||-1===d?(g=n-t,e=g,j=g/k,-1===d?(h=q,f=Math.ceil(m*j)):(h=Math.ceil(m*j)-u-t,f=h,q>=f&&a(e,f))):k>m?(g=n-t,e=g,j=g/k,h=Math.ceil(m*j)-t-u,f=h,(q>=f||h+t+u>o)&&a(e,f)):(h=o-u-t,f=h,i=h/m,g=Math.ceil(k*i)-t,e=g,(p>=e||g>n)&&a(e,f))):(1===c?g=k:-1===c&&(g=p),e=k,1===d?h=m:-1===d&&(h=q),f=m)}var b,c,d,e,f,g,h,i,j,k=(this.$lightbox,this.data),l=this,m=k.currentSetElement,n=this.getWindowSize("width"),o=this.getWindowSize("height"),p=k.minimalLightboxSize.width,q=k.minimalLightboxSize.height,r=m.width,s=m.height,t=k.lightboxPadding,u=k.headerHeight;return a(r,s),{imageTargetWidth:e,imageTargetHeight:f,lightboxTargetWidth:g,lightboxTargetHeight:h,statusWidth:c,statusHeight:d}},getWindowSize:function(b){var c=this.data,d=a(window).width(),e=a(window).height(),f=c.minimalLightboxSize,g=c.lightboxPadding,h=c.headerHeight,i=f.width+g,j=f.height+g+h;return"width"===b?i>d?i:d:j>e?j:e},handleKeyboard:function(a){var b=this.data,c=b.currentSetElement,d=c.self.options,e=d.keys,f=a.which;b.ready!==!1&&(f===e.next[0]||f===e.next[1]?this.next():f===e.previous[0]||f===e.previous[1]?this.prev():f===e.close[0]||f===e.close[1]?this.closeLightbox():f!==e.panorama[0]&&f!==e.panorama[1]||"image"!==c.type||this.panoramaToggle(a))},hideArrow:function(){var a=this.$lightbox,b=a.arrow;b.hide()},liveResize:function(){var a=this.data,b=(this.$lightbox,a.currentSetElement.type);a.ready&&a.panoramaOn===!1&&"image"===b?(this.queueResizeLightbox(),this.updateTitleWidth(),this.queueCenterContent(),this.panoramaCheckAvailability()):a.ready&&a.panoramaOn&&"image"===b?(this.queueCenterLightbox(),this.panoramaShrink(),this.panoramaCheckAvailability()):a.ready&&"image"!==b&&this.queueCenterLightbox()},loadContentFlash:function(b){function c(){d=i.getParam("width",b),e=i.getParam("height",b),(null===d||isNaN(d))&&(d=n.videoWidth),(null===e||isNaN(e))&&(e=n.videoHeight),m.width=d,m.height=e,l=i.replaceHtmlPatterns(l,{width:d,height:e,url:b}),f=a("<div></div>"),f.css({display:"none",width:d,height:e}),j.removeClass("ui-lightbox-loader").empty().append(l).children().wrap(f),k.resolve()}var d,e,f,g=this.data,h=this.$lightbox,i=this,j=h.content,k=a.Deferred(),l=g.htmlFlash,m=g.currentSetElement,n=m.self.options;return j.addClass("ui-lightbox-loader"),setTimeout(c,1e3),k.promise()},loadContentImage:function(c){var d=this.$lightbox,e=this.data,f=this,g=e.currentSetElement,h=a.Deferred(),i=a("<img />");return d.content.addClass("ui-lightbox-loader"),i.attr("src",c).bind("load",function(){a(this).unbind("load"),g.width=this.width,g.height=this.height,d.content.removeClass("ui-lightbox-loader").empty().append(this).children().hide(),h.resolve()}).error(function(){d.content.removeClass("ui-lightbox-loader"),f.showErrorMessage(),h.resolve()}).each(function(){if(this.complete||this.complete===b){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=a}}),h.promise()},loadContentVimeo:function(b){{var c=this.data,d=this.$lightbox,e=this,f=a.Deferred(),g=c.providers.vimeo,h=c.currentSetElement,i=h.self.options;c.minimalLightboxSize}return d.content.addClass("ui-lightbox-loader"),a.ajax({url:g,data:{url:b,maxwidth:i.videoWidth,maxheight:i.videoHeight},dataType:"jsonp",timeout:5e3}).success(function(a){d.content.removeClass("ui-lightbox-loader").empty().append(a.html).children().wrap("<div style='display: none'></div>").end().find("div:first").width(a.width).height(a.height),i.overwriteTitle===!1&&(h.title=a.title),h.width=a.width,h.height=a.height,f.resolve()}).error(function(){d.content.removeClass("ui-lightbox-loader"),e.showErrorMessage(),f.resolve()}),f.promise()},loadContentYoutube:function(){function b(){e.content.removeClass("ui-lightbox-loader"),g.showErrorMessage(),h.resolve()}var c,d=this.data,e=this.$lightbox,f=e.content,g=this,h=a.Deferred(),i=d.providers.youtube,j=d.currentSetElement,k=j.self.options,l=(d.minimalLightboxSize,k.videoWidth),m=k.videoHeight,n=d.htmlYoutube;return e.content.addClass("ui-lightbox-loader"),a.ajax({url:i+j.id+"?callback=?",data:{v:2,alt:"jsonc",prettyprint:!0},dataType:"jsonp",timeout:5e3}).success(function(d){return d.error?void b():(n=g.replaceHtmlPatterns(n,{width:l,height:m,url:j.id}),c=a("<div></div>"),c.css({display:"none",width:l,height:m}),f.removeClass("ui-lightbox-loader").empty().append(n).children().wrap(c),k.overwriteTitle===!1&&(j.title=d.data.title),j.width=l,j.height=m,void h.resolve())}).error(function(){b()}),h.promise()},navigationGoToElement:function(a){var b=this.data,c=this.sets,d=this.$lightbox,e=b.currentSet;b.currentElementNumber=a,b.currentSetElement=c[e][a-1],this.setNextQueue(),d.queueContainer.next.dequeue("lightboxNext")},next:function(){var a=this.data,b=this.sets,c=this.$lightbox,d=a.ready,e=a.panoramaOn,f=a.currentSet,g=a.currentElementNumber,h=a.totalElementsNumber,i=a.currentSetElement.self.options,j=i.loop,k=!0;d&&"single"!==f&&e===!1&&(h>=g+1?a.currentElementNumber=g+=1:g+1>h&&j?a.currentElementNumber=g=1:k=!1,k&&(a.currentSetElement=b[f][g-1],this.setNextQueue(),c.queueContainer.next.dequeue("lightboxNext")))},open:function(b){{var c=this.data,d=this.sets,e=this.$lightbox,f=b.element,g=this.getSetName(b);a(f).attr("href")}c.currentSet=g,c.totalElementsNumber=d[g].length,c.currentElementNumber=this.getCurrentElementNumber(f),c.currentSetElement=d[g][c.currentElementNumber-1],this.setOpenQueue(),this.setNextQueue(),this.checkButtonsState(),e.queueContainer.open.dequeue("lightboxOpen")},panoramaCenterContent:function(){var a,b,c=this.data,d=this.$lightbox,e=c.currentSetElement,f=this.getAvailableScreenSize(),g=f.width,h=f.height,i=e.width,j=e.height,k=d.content,l=k.find("img");a=i>g?0:k.width()/2-l.width()/2,b=j>h?0:k.height()/2-l.height()/2,l.css({top:b,left:a})},panoramaCheckAvailability:function(){var a=this.data,b=a.currentSetElement,c=b.width,d=b.height,e=b.currentWidth,f=b.currentHeight;c>e||d>f?(this.panoramaShowIcon("expand"),a.enablePanorama=!0):(a.enablePanorama=!1,this.panoramaHideIcon())},panoramaExpand:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement,e=d.self.options;b.panoramaOn=!0,"click"===a.type?this.panoramaShowIcon("shrink","-hover"):this.panoramaShowIcon("shrink"),c.content.css("overflow","hidden"),c.content.find("img").width(d.width).height(d.height),this.panoramaSetContentSize(),this.panoramaCenterContent(),this.queueCenterLightbox(),this.updateTitleWidth(),e.showMap&&this.panoramaShowMap(),this.hideArrow(),this.setCursor()},panoramaHideIcon:function(){var a=this.data,b=this.$lightbox;b.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink"),a.panoramaOn=!1},panoramaHideMap:function(){var a=this.$lightbox;a.map.hide(),a.viewport.css({left:-1,top:-1})},panoramaHighlight:function(){var a,b=this.$lightbox,c="-hover";b.panoramaIcon.attr("class",function(b,d){return a=d.indexOf(c),-1!==a?d.slice(0,a):d+c})},panoramaSetContentSize:function(){var a,b,c=this.data,d=this.$lightbox,e=c.currentSetElement,f=c.minimalLightboxSize,g=f.width,h=f.height,i=this.getAvailableScreenSize(),j=i.width,k=i.height,l=e.width,m=e.height;a=l>j?j:g>=l?g:l,b=m>k?k:h>=m?h:m,d.content.width(a).height(b)},panoramaShowIcon:function(a,b){var c=this.$lightbox,d=b||"",e="ui-lightbox-panorama-icon-"+a+d;c.panoramaIcon.show().removeClass().addClass(e)},panoramaShowMap:function(){var a,b,c,d,e,f,g=this.data,h=g.minimalLightboxSize,i=this.$lightbox,j=i.content,k=j.find("img"),l=k.width(),m=k.height(),n=g.currentSetElement,o=g.mapSize;c=o.width/n.width,d=o.height/n.height,e=l<h.width?l:j.width(),f=m<h.height?m:j.height(),a=Math.ceil(e*c),b=Math.ceil(f*d),i.viewport.width(a).height(b),i.map.show(),g.viewportRatio={width:c,height:d}},panoramaShrink:function(a){var b=this.data,c=this.$lightbox;b.panoramaOn=!1,a&&"click"===a.type?this.panoramaShowIcon("expand","-hover"):this.panoramaShowIcon("expand"),this.queueResizeLightbox(),this.queueCenterContent(),c.content.css("overflow","visible"),this.updateTitleWidth(),this.panoramaHideMap(),this.setCursor()},panoramaStart:function(a){{var b=this.data;this.$lightbox}b.panoramaPosition={xStart:a.pageX,yStart:a.pageY},a.preventDefault()},panoramaStop:function(a){var b=this.data,c=this.$lightbox,d=-1*(a.pageX-b.panoramaPosition.xStart),e=-1*(a.pageY-b.panoramaPosition.yStart),f=c.content,g=b.viewportRatio;b.panoramaOn&&(f.scrollLeft(f.scrollLeft()+d).scrollTop(f.scrollTop()+e),c.viewport.css({left:f.scrollLeft()*g.width-1,top:f.scrollTop()*g.height-1})),a.stopPropagation()},panoramaToggle:function(a){var b=this.data,c=b.panoramaOn,d=b.enablePanorama;d&&c===!1?this.panoramaExpand(a):d&&c&&this.panoramaShrink(a)},prev:function(){var a=this.data,b=this.sets,c=this.$lightbox,d=a.ready,e=a.panoramaOn,f=a.currentSet,g=a.currentElementNumber,h=a.totalElementsNumber,i=a.currentSetElement.self.options,j=i.loop,k=!0;d&&"single"!==f&&e===!1&&(g-1>=1?a.currentElementNumber=g-=1:1>g-1&&j?a.currentElementNumber=g=h:k=!1,k&&(a.currentSetElement=b[f][g-1],this.setNextQueue(),c.queueContainer.next.dequeue("lightboxNext")))},removeSetElement:function(a){var b=this.data,c=this.sets,d=b.currentSet,e=b.totalElementsNumber;c[d].splice(a-1,1),1===e||"single"===d?(this.closeLightbox(),this.destroy()):(this.destroy(),b.totalElementsNumber=c[d].length,this.navigationGoToElement(a===e?a-1:a))},replaceHtmlPatterns:function(b,c){return a.each(c,function(a,c){var d=new RegExp("{"+a+"}","g");b=b.replace(d,c)}),b},setButtonState:function(a,b){var c=this.$lightbox,d=b||c.controlButtons;switch(a){case"default":d.removeClass("ui-state-highlight ui-state-disabled");break;case"highlight":d.addClass("ui-state-highlight");break;case"disabled":d.addClass("ui-state-disabled")}},setCursor:function(a){var b=this.data,c=this.$lightbox,d=c.contentContainer,e=b.currentSet,f=b.currentSetElement,g=b.currentSetElement.type,h=b.totalElementsNumber,i=b.currentElementNumber,j=b.side,k=b.panoramaOn,l=b.showErrorMessage,m=f.self.options,n=m.loop;b.ready?("single"===e||1===h||1===i&&"left"===j||i===h&&"right"===j)&&k===!1&&("image"===g||"image"!==g&&l)?n===!1?d.css("cursor","default"):d.css("cursor","pointer"):k?d.css("cursor","move"):"image"===g||"image"!==g&&l?d.css("cursor","pointer"):d.css("cursor","auto"):d.css("cursor","default"),a&&a.preventDefault()},setNextQueue:function(){var b=this.$lightbox,c=[a.proxy(this.queueSlideUpHeader,this),a.proxy(this.queueHideContent,this),a.proxy(this.queueLoadContent,this),a.proxy(this.queueResizeLightbox,this),a.proxy(this.queueCenterContent,this),a.proxy(this.queueShowContent,this),a.proxy(this.queueSlideDownHeader,this)];b.queueContainer.next.queue("lightboxNext",c)},setOpenQueue:function(){var b=this.$lightbox,c=[a.proxy(this.queueShowOverlay,this),a.proxy(this.queueCenterLightbox,this),a.proxy(this.queueLoadContent,this),a.proxy(this.queueResizeLightbox,this),a.proxy(this.queueCenterContent,this),a.proxy(this.queueShowContent,this),a.proxy(this.queueSlideDownHeader,this)];b.queueContainer.open.queue("lightboxOpen",c)},setReferences:function(){var b=this.$lightbox;b.root=a("#ui-lightbox"),b.panoramaIcon=b.root.find("#ui-lightbox-panorama-icon"),b.contentContainer=b.root.find("#ui-lightbox-content-container"),b.content=b.contentContainer.find("#ui-lightbox-content"),b.arrow=b.contentContainer.find("#ui-lightbox-arrow"),b.header=b.root.find("#ui-lightbox-bottombar"),b.headerWrapper=b.header.find("#ui-lightbox-title-wrapper"),b.overlay=a("#ui-lightbox-overlay"),b.next=b.root.find("#ui-lightbox-button-next"),b.prev=b.root.find("#ui-lightbox-button-prev"),b.controlButtons=b.next.add(b.prev),b.close=b.root.find("#ui-lightbox-button-close"),b.counter=b.root.find("#ui-lightbox-counter"),b.title=b.root.find("#ui-lightbox-title"),b.map=a("#ui-lightbox-map"),b.viewport=b.map.children().eq(0),b.queueContainer={open:a({}),next:a({})}},showArrow:function(a){var b=this.data,c=this.$lightbox,d=c.arrow,e=b.showErrorMessage,f=b.side,g=b.currentElementNumber,h=b.totalElementsNumber,i=b.currentSetElement.self.options.loop;b.ready&&"single"!==b.currentSet&&("image"===b.currentSetElement.type||e)&&b.panoramaOn===!1&&("left"===f&&(g>1||i)?d.show().removeClass("ui-lightbox-arrow-next ui-corner-left").addClass("ui-lightbox-arrow-prev ui-corner-right").find("span").removeClass("ui-icon-carat-1-e").addClass("ui-icon-carat-1-w"):"right"===f&&(h>g||i)?d.show().removeClass("ui-lightbox-arrow-prev ui-corner-right").addClass("ui-lightbox-arrow-next ui-corner-left").find("span").removeClass("ui-icon-carat-1-w").addClass("ui-icon-carat-1-e"):this.hideArrow()),a&&a.preventDefault()},showErrorMessage:function(){var b,c,d,e=this.data,f=this.$lightbox,g=this,h=e.currentSetElement,i=h.self.options,j=e.currentElementNumber,k=i.errorMessage,l=i.againButtonLabel,m=i.rejectButtonLabel,n=e.htmlErrorScreen,o=e.errorScreenSize,p=o.width,q=o.height;n=g.replaceHtmlPatterns(n,{message:k,labelAgain:l,labelReject:m}),d=a(n),b=d.find("#ui-lightbox-error-footer-again"),c=d.find("#ui-lightbox-error-footer-reject"),b.click(function(){g.navigationGoToElement(j)}).hover(function(){a(this).toggleClass("ui-state-hover")}),c.click(function(){g.removeSetElement(j)}).hover(function(){a(this).toggleClass("ui-state-hover")}),f.content.empty().append(d).find("#ui-lightbox-error").width(p).height(q).end().children().hide(),e.showErrorMessage=!0},updateCounter:function(){var a,b,c,d=this.data,e=this.$lightbox,f=d.currentSetElement,g=f.self.options,h=d.currentSet;"single"!==h?(a=d.currentElementNumber,b=d.totalElementsNumber):(a=1,b=1),c=a+g.counterDelimiter+b,e.counter.text(c)},updateTitle:function(){var a=this.data,b=this.$lightbox,c=a.currentSetElement;""!==c.title?b.title.empty().append(c.title):b.title.append("&nbsp;")},updateTitleWidth:function(){var a=this.$lightbox;a.header.width(a.content.width()-12)},queueHideContent:function(b){var c=this.data,d=this.$lightbox,e=c.currentSetElement,f=e.self.options;d.content.children().fadeOut(f.animationSpeed,function(){a(this).remove(),b()}),d.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink"),c.panoramaOn=!1,this.panoramaHideMap()},queueShowOverlay:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement.self;b.ready=!1,this.setCursor(),c.overlay.fadeIn(d.options.animationSpeed,a)},queueCenterLightbox:function(a){var b=this.$lightbox,c=b.root,d=this.getWindowSize("width"),e=this.getWindowSize("height"),f=c.outerWidth(),g=c.outerHeight();c.css({left:Math.round((d-f)/2)+"px",top:Math.round((e-g)/2)+"px"}).show(0,a)},queueLoadContent:function(b){var c,d=this.data,e=d.currentSetElement;switch(d.showErrorMessage=!1,e.type){case"image":c="loadContentImage";break;case"youtube":c="loadContentYoutube";break;case"vimeo":c="loadContentVimeo";break;case"flash":c="loadContentFlash"}a.when(this[c](e.url)).then(function(){b()})},queueResizeLightbox:function(b){{var c,d,e,f,g,h,i,j=this.data,k=this.$lightbox,l=j.lightboxPadding,m=j.headerHeight,n=j.currentSetElement,o=n.self.options,p=j.showErrorMessage,q=j.errorScreenSize,r=q.width,s=q.height,t=j.minimalLightboxSize;t.width,t.height}c=o.animationSpeed,"image"===n.type&&p===!1?(d=this.getSizes(),e=d.imageTargetWidth,f=d.imageTargetHeight,g=d.lightboxTargetWidth,h=d.lightboxTargetHeight,i=k.content.find("img"),n.currentWidth=e,n.currentHeight=f,i.width(e).height(f),c=a.isFunction(b)?o.animationSpeed:0):"youtube"!==n.type&&"vimeo"!==n.type||p!==!1?"flash"===n.type&&p===!1?(g=this.getOptimalSize("width",n.width),h=this.getOptimalSize("height",n.height)):p&&(c=0,g=r,h=s):(g=this.checkMinimalSize("width",n.width),h=this.checkMinimalSize("height",n.height)),k.root.find("#ui-lightbox-content").animate({width:g},c).animate({height:h},c).end().animate({left:(this.getWindowSize("width")-g-l)/2},c).animate({top:(this.getWindowSize("height")-h-l-m)/2},c,b)},queueCenterContent:function(a){var b=this.$lightbox,c=b.content,d=c.children();c.children().css({top:c.height()/2-d.outerHeight()/2,left:c.width()/2-d.outerWidth()/2}),a&&a()},queueShowContent:function(a){var b=this.data,c=this.$lightbox,d=this,e=b.currentSetElement,f=e.self.options,g=b.showErrorMessage;c.content.children().fadeIn(f.animationSpeed,function(){"image"===e.type&&g===!1&&d.panoramaCheckAvailability(),a()})},queueSlideDownHeader:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement.self.options;c.header.slideDown(d.animationSpeed,a),this.updateCounter(),this.updateTitleWidth(),this.updateTitle(),this.checkButtonsState(),b.ready=!0,this.setCursor(),this.showArrow()},queueSlideUpHeader:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement,e=d.self.options;b.ready=!1,this.hideArrow(),this.setCursor(),c.header.slideUp(e.animationSpeed,a)},$lightbox:{},sets:{},data:{minimalLightboxSize:{width:300,height:300},lightboxPadding:12,headerHeight:57,ready:!1,panoramaOn:!1,mapSize:{width:150,height:100},providers:{vimeo:"http://www.vimeo.com/api/oembed.json?callback=?",youtube:"http://gdata.youtube.com/feeds/api/videos/"},showErrorMessage:!1,currentSetElement:{},enablePanorama:!1,errorScreenSize:{width:500,height:500},htmlFlash:"<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='{width}' height='{height}'><param name='movie' value='{url}' /><!--[if !IE]>--><object type='application/x-shockwave-flash' data='{url}' width='{width}' height='{height}'><!--<![endif]--><!--[if !IE]>--></object><!--<![endif]--></object>",htmlErrorScreen:"<div id='ui-lightbox-error'><div id='ui-lightbox-error-message' class='ui-lightbox-error-icon-sign'>{message}</div><div id='ui-lightbox-error-footer'><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-again' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-refresh'></span><span class='ui-button-text'>{labelAgain}</span></button><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-reject' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-trash'></span><span class='ui-button-text'>{labelReject}</span></button></div></div>",htmlYoutube:"<iframe class='youtube-player' type='text/html' width='{width}' height='{height}' src='http://www.youtube.com/embed/{url}' frameborder='0'></iframe>",htmlLightbox:"<div id='ui-lightbox' class='ui-widget ui-widget-content ui-corner-all' style='display: none'><div id='ui-lightbox-content-container'><div id='ui-lightbox-content' class='ui-widget-content'></div><a id='ui-lightbox-arrow' class='ui-widget-header' style='display: none'><span class='ui-icon'>go</span></a></div><div id='ui-lightbox-bottombar' class='ui-widget-header ui-corner-all' style='display: none'><p id='ui-lightbox-title-wrapper'><span id='ui-lightbox-title'></span></p><p id='ui-lightbox-bottombar-bottom'><a id='ui-lightbox-button-prev' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-w'>prev</span></a><span id='ui-lightbox-counter'></span><a id='ui-lightbox-button-next' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-e'>next</span></a></p><a id='ui-lightbox-button-close' class='ui-lightbox-button'><span class='ui-icon ui-icon-closethick'>close</span></a><div id='ui-lightbox-panorama-icon' style='display: none'></div></div></div>",htmlMap:"<div id='ui-lightbox-map' style='display: none'><div id='ui-lightbox-map-viewport'></div></div>",htmlOverlay:"<div id='ui-lightbox-overlay' class='ui-widget-overlay' style='display: none'></div>"}}})}(jQuery);